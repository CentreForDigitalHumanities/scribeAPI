{
  "name":"mark",
  "label":"Mark Workflow",
  "subject_fetch_limit":     10,
  "subject_request_scope": "active_root",
  "generates_subjects": true,
  "generates_subjects_after": 1,
  "generates_subjects_for": "transcribe",

  "first_task":"sea_ice_present",

  "tasks":{

    "sea_ice_present": {
      "tool": "pickOne",
      "instruction": "Is there any sea ice present?",
      "tool_config": {
        "options": {
          "present": {
            "label": "Yes, sea ice present",
            "next_task": "sea_ice"
          },
          "mentioned": {
            "label": "No, but sea ice mentioned",
            "next_task": "sea_ice_mention"
          },
          "not-present": {
            "label": "No",
            "next_task": "weather_present"
          }
        }
      }
    },

    "sea_ice": {
      "generates_subjects": true,
      "tool":"pickOneMarkOne",
      "instruction":"Pick a sea ice description. Draw a rectangle around the corresponding text.",
      "tool_config": {
        "tools": [
          {"type": "rectangleTool", "label": "Date",                     "color": "red", "generates_subject_type": "sea_ice_date" },
          {"type": "rectangleTool", "label": "Sea Ice Description",      "color": "red", "generates_subject_type": "sea_ice_description" },
          {"type": "rectangleTool", "label": "Other Desciptions",        "color": "red", "generates_subject_type": "sea_ice_other_description" }
        ]
      },
      "next_task": "sea_ice_present"
    },

    "sea_ice_mention": {
      "tool": "pickOne",
      "instruction": "Are any of the following mentions of sea ice present? If so, click on them.",
      "tool_config": {
        "options": {
          "present": {
            "label": "Ice Field",
            "next_task": "sea_ice"
          },
          "mentioned": {
            "label": "Floe",
            "next_task": "sea_ice_mention"
          },
          "not-present": {
            "label": "Drift Ice",
            "next_task": "weather_present"
          },
          "not-present": {
            "label": "Sailing Ice",
            "next_task": "weather_present"
          },
          "not-present": {
            "label": "Pack Ice",
            "next_task": "weather_present"
          }
        }
      }
    },

    "weather_present": {
      "tool": "pickOne",
      "instruction": "Are there any descriptions of the weather?",
      "tool_config": {
        "options": {
          "present": {
            "label": "Yes",
            "next_task": "weather"
          },
          "mentioned": {
            "label": "No",
            "next_task": null
          }
        }
      }
    },

    "weather": {
      "generates_subjects": true,
      "tool":"pickOneMarkOne",
      "instruction":"Pick a weather description. Draw a rectangle around the corresponding text.",
      "tool_config": {
        "tools": [
          {"type": "rectangleTool", "label": "Date",                     "color": "red", "generates_subject_type": "weather_date" },
          {"type": "rectangleTool", "label": "Wind Force/Direction",     "color": "red", "generates_subject_type": "weather_wind" },
          {"type": "rectangleTool", "label": "Sky/Cloud Description",    "color": "red", "generates_subject_type": "weather_sky" },
          {"type": "rectangleTool", "label": "Precipitation",            "color": "red", "generates_subject_type": "weather_precipitation" },
          {"type": "rectangleTool", "label": "Sea State",                "color": "red", "generates_subject_type": "weather_sea" },
          {"type": "rectangleTool", "label": "Temperature",              "color": "red", "generates_subject_type": "weather_temperature" },
          {"type": "rectangleTool", "label": "Barometric Pressure",      "color": "red", "generates_subject_type": "weather_pressure" },
          {"type": "rectangleTool", "label": "Other Weather Desciption", "color": "red", "generates_subject_type": "weather_other_description" }
        ]
      },
      "next_task": "weather_present"
    },

    "location": {
      "generates_subjects": true,
      "tool":"pickOneMarkOne",
      "instruction":"Draw a rectangle around the text that mentions the ship\'s location",
      "tool_config": {
        "tools": [
          {"type": "rectangleTool", "label": "Location",            "color": "red", "generates_subject_type": "item_location" },
          {"type": "rectangleTool", "label": "Weather Information", "color": "red", "generates_subject_type": "item_weather" },
          {"type": "rectangleTool", "label": "Cargo",               "color": "red", "generates_subject_type": "item_cargo" },
          {"type": "rectangleTool", "label": "Inventory",           "color": "red", "generates_subject_type": "item_inventory" },
          {"type": "rectangleTool", "label": "Illustration/Poetry", "color": "red", "generates_subject_type": "item_illustration" },
          {"type": "rectangleTool", "label": "Other",               "color": "red", "generates_subject_type": "item_other" }
        ]
      },
      "next_task": "records_present"
    },



    "records_present": {
      "tool":"pickOne",
      "instruction":"Are there any records to transcribe in this document?",
      "tool_config": {
        "options": {
          "yes": {
            "label":"Yes",
            "next_task":"type_of_record"
          },
          "no": {
            "label":"No",
            "next_task": null
          },
          "debug": {
            "label":"DEBUG",
            "next_task": "mark_records_for_transcription"
          }
        }
      }
    },

    "type_of_record": {
      "tool":"pickOne",
      "instruction":"What type of record are you transcribing?",
      "tool_config": {
        "options": {
          "event": {
            "label":"Event",
            "next_task":"mark_event_for_transcription"
          },
          "item": {
            "label":"Item",
            "next_task": "mark_item_for_transcription"
          }
        }
      }
    },

    "mark_item_for_transcription": {
      "generates_subjects": true,
      "tool":"pickOneMarkOne",
      "instruction":"Pick an item and mark it on the document.",
      "tool_config": {
        "tools": [
          {"type": "rectangleTool", "label": "Location",            "color": "red", "generates_subject_type": "item_location" },
          {"type": "rectangleTool", "label": "Weather Information", "color": "red", "generates_subject_type": "item_weather" },
          {"type": "rectangleTool", "label": "Cargo",               "color": "red", "generates_subject_type": "item_cargo" },
          {"type": "rectangleTool", "label": "Inventory",           "color": "red", "generates_subject_type": "item_inventory" },
          {"type": "rectangleTool", "label": "Illustration/Poetry", "color": "red", "generates_subject_type": "item_illustration" },
          {"type": "rectangleTool", "label": "Other",               "color": "red", "generates_subject_type": "item_other" }
        ]
      },
      "next_task": "records_present"
    },

    "mark_event_for_transcription": {
      "generates_subjects": true,
      "tool":"pickOneMarkOne",
      "instruction":"Pick an event and mark it on the document.",
      "tool_config": {
        "tools": [
          {"type": "rectangleTool", "label": "Whaling Activity",         "color": "red", "generates_subject_type": "event_whaling_activity" },
          {"type": "rectangleTool", "label": "Ship Interaction",         "color": "red", "generates_subject_type": "event_ship_interaction" },
          {"type": "rectangleTool", "label": "Interaction with Natives", "color": "red", "generates_subject_type": "event_natie_interaction" },
          {"type": "rectangleTool", "label": "Unusual Occurrences",      "color": "red", "generates_subject_type": "event_unusual_occurrence" },
          {"type": "rectangleTool", "label": "Other",                    "color": "red", "generates_subject_type": "event_other" }
        ]
      },
      "next_task": "records_present"
    },

    "mark_records_for_transcription": {
      "generates_subjects": true,
      "tool":"pickOneMarkOne",
      "instruction":"Pick a tool and mark each record:",
      "tool_config": {
        "tools": [
          {"type": "pointTool",     "label": "Point Tool",    "color": "red",   "generates_subject_type": "transcribe_point" },
          {"type": "rectangleTool", "label": "Drawing/Note",  "color": "green", "generates_subject_type": "transcribe_rectangle" },
          {"type": "textRowTool",   "label": "Journal Entry", "color": "blue",  "generates_subject_type": "transcribe_text_row" }
        ]
      },
      "next_task": "records_present"
    }
  }
}
